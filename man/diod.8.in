.TH diod 8 "@META_DATE@" "@META_ALIAS@" "@META_NAME@"
.SH NAME
diod \- distributed I/O daemon
.SH SYNOPSIS
.B diod
.I "[OPTIONS]"
.SH DESCRIPTION
.B diod
is the distributed I/O daemon server, which
implements I/O forwarding on Linux clusters.
.LP
Configuration is read from the diod.conf (5) config file.
Some configuration can be overridden on the command line, as described below.
.SH OPTIONS
.TP
.I "-f, --foreground"
Do not change working directory to @X_LOCALSTATEDIR@/run,
drop the controlling terminal, or run in the background.
Send logs to stderr not syslog.
.TP
.I "-d, --debug MASK"
Set the debug mask.  The bit values are:
0x1 log decoded 9P protocol messages;
0x2 log any 9P operation errors.
.TP
.I "-l, --listen IP:PORT"
Set the listen address (default 0.0.0.0:10006).
A list of listen addresses can be specified in the config file (diodlisten
parameter) but the command line accepts only one.
.TP
.I "-w, --nwthreads INT"
Set the number of worker threads to spawn to handle 9P operations.
The default is 16.
.TP
.I "-c, --config-file PATH"
Set config file path.
.TP
.I "-e, --export PATH"
Set the file system to be exported.
A list of exports can be specified in the config file (exports parameter),
but the command line accepts only one.
.TP
.I "-a, --allowany"
Override TCP wrappers checks and allow any client to connect.
.TP
.I "-r, --readahead"
Allow kernel readahead.
This disables the default behavior of calling
posix_madvise(POSIX_MADV_RANDOM) on every file.
.TP
.I "-m, --no-munge-auth"
This option allows users to attach without security credentials.
WARNING: this option leaves exported file systems vulnerable to
access by any user who can connect to your server and speak 9P.
It is intended for testing only.
.TP
.I "-x, --exit-on-lastuse"
Exit when the last connection drops, if clients have successfully attached.
.TP
.I "-F, --listen-fds N"
Listen for connection on file descriptors zero through N.
This is the mechanism that \fBdiodctl\fR uses to pass dynamically
allocated ports to \fBdiod\fR.
.TP
.I "-u, --runas-uid UID"
Causes the server to drop root permission and run as UID.
Only that user will be allowed to attach.
.SH "LOGGING"
\fBdiod\fR logs all messages to the LOG_DAEMON syslog facility
at LOG_ERR severity.
.SH "FILES"
@X_SBINDIR@/diod
.br
@X_SYSCONFDIR@/diod.conf
.br
@X_LOCALSTATEDIR@/run/diod.pid
.SH "SEE ALSO"
diodctl (8), diodmount (8), diod.conf (5), hosts_access (5)
