2010-04-08 Jim Garlick <garlick@llnl.gov>

	* test/t20-aread, test/t21-awrite : Tests for atomic I/O.

	* diod/diod.c, diod/ops.c, common/diod_conf.[ch], diodctl/serv.c :
	Added -A (atomic-max) option to limit max size of atomic transfers.

2010-04-06 Jim Garlick <garlick@llnl.gov>

	* : tag 1.0-pre5

	* diodmount/diodmount.c : Update mtab in single non-direct mount case.

	* diodctl/serv.c : Reap children even if they start DOA.

	* common/diod_sock.c : Fix logic error in diod_sock_tryconnect
	that caused all the retries to be used every time.

	* diodctl/serv.c, common/diod_conf.c : Generate one exports file
	in run dir and share it instead of generating one in /tmp per server.

	* test/*, diodctl/serv.c : Don't start diod with -f.

	* man/diod.conf.5.in, man/diod.8.in : Update to reflect drop of -f.

	* diod/diod.c : Drop -f option.  Don't damonize or raise resource
	limits.  Instead depend on inheritance from diodctl.

	* diodctl/diodctl.c : Create run dir if it doesn't exist.

	* scripts/diodctl.init.in, configure.ac, diod.spec : Rename init
	script from diod to diodctl.

	* diodmount/diodmount.c : Add documentation.  Fix diodmount -a to
	prepend directory to mount paths in /etc/mtab.
	
2010-04-05 Jim Garlick <garlick@llnl.gov>

	* diodctl/serv.c : Set diod argv[0] to diod-private or diod-shared
	rather than diod-<uid>.

	* diodmount/diodmount.c : Mount diodctl in a child process that
	has unshared its file system namespace.  Don't special-case a mount
	of /diodctl.  Change options:
	- Add -a (--mount-all).
	- Add -U (--unmount-all).
	- Add -f (--fake-mount).
	- Add -D (--create-directories).
	- Drop -x (--list-exports).

	* test/tstat.c : fsid is an expected failure.  Don't print details
	of the discrepency because if the value changes the test will fail.

	* man/diodmount.8.in : Update to reflect current options.

2010-04-02 Jim Garlick <garlick@llnl.gov>

	* common/diod_conf.c :
	- Avoid calling stat on mount points in diod_conf_validate_exports ().
	- Rename 'diodctllisten' to listen', drop 'diodlisten'.
	- Drop 'runasuid' config file key word.
	- Drop 'allowprivate' config file key word.

	* diodmount/diodmount.c : Option changes:
	- Drop -p (private) option.
	- Add -d (direct) option.

	* diodctl/srv.c : Pass all info to diod on the command line.

	* diodctl/diodctl.c : Option changes:
	- Allow multiple -e (export) options.
	- Allow multiple -l (listen) options.

	* diod/diod.c : Option changes:
	- Drop -c option, and do not read config file.
	- Allow multiple -e (export) options.
	- Allow multiple -l (listen) options.
	- Add -E option to read exports from a flat file (made by diodctl).

2010-04-01 Jim Garlick <garlick@llnl.gov>

	* : tag 1.0-pre4

	* diod/ops.c, tests/t19* : Initial fcntl lock implementation.

	* diod/ops.c, tests/t18* : Initial flock implementation.

	* : Remove vestiges of 9P20000.H.  It's all .L now.

2010-03-24 Jim Garlick <garlick@llnl.gov>

	* : tag 1.0-pre3

	* diodmount/diodmount.c : Add --verbose option.
	Mount diod with 'datacheck' option by default.

2010-03-23 Jim Garlick <garlick@llnl.gov>

	* test/t16-stat, test/tstat.c : Compare stat results.

	* test/t17-chmod : Make sure all mode bits can be set and read
	on client and server.

	* diodmount/opt.c : Match mount options caselessly.

	* diod/diod.c, diod/ops.c, common/diod_conf.[ch] : Drop readahead
	option.

2010-03-22 Jim Garlick <garlick@llnl.gov>

	* diod/ops.c : _ustat2qid: assign inode number directly to qid->path.

2010-03-19 Jim Garlick <garlick@llnl.gov>

	* diod/ops.c, man/9p-*.in : Document 9P2000.L ops vs 9P2000.H.

	* npfs/include/npfs.h, npfs/libnpfs/conn.c, npfs/libnpfs/srv.c,
	npfs/libnpfs/file.c, npfs/libnpfs/fcall.c : Convert proto_version
	from a bitmask to discrete value like in upstream v9fs.

2010-03-17 Jim Garlick <garlick@llnl.gov>

	* : tag 1.0-pre2

	* diod/diod.c, diodctl/diodctl.c : Daemonize before listening or
	daemon () closes our ports for us.  Remove log complaints about chdir
	to rundir.

	* diodctl/ops.c : Include a log message for all attach failures.

	* test/Makefile.am : Remove test directories only if they exist.

	* common/diod_sock.[ch], diodctl/serv.c : Fix a bug in the testing
	of the connection to private diod server.  Also restructure the code
	to test all of the listen addresses until successful.  Improve
	logging on failure.

2010-03-16 Jim Garlick <garlick@llnl.gov>

	* : tag 1.0-pre1
